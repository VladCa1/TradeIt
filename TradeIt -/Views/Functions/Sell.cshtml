@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}

@model TradeIt__.ViewModels.SellModel


<div class="container">
    <h1>Selling</h1>
    <form asp-action="PostSell" asp-controller="Functions" method="post">
        <div class="form-group">
            <label class="">You sell @Model.balanceName</label>
            <input class="form-control" type="number" max="@Model.balance.Amount" required id="toSpend" name="amount" />
        </div>
        <div class="form-group">
            <label class="">You get <span class="font-weight-bold">[EUR]</span></label>
            <input class="form-control" type="number" value="" readonly id="toReceive" />
        </div>
        <input value="@Model.balance.CurrencyId" hidden name="id"/>
        <div class="form-check">
            <input type="checkbox" class="form-check-input" id="checkSell" required />
            <label class="form-check-label" for="checkSell">
                I confirm that I have read, understand and agree to trading policies.
            </label>
        </div>
        <button type="submit" class="btn btn-primary">Sell</button>
    </form>
</div>

<script>
    var toSpend = document.getElementById("toSpend");
    var toReceive = document.getElementById("toReceive");

    toSpend.addEventListener("change", function () {
        toReceive.value = toSpend.value * @Model.exchangeRate.Rate  
    })

</script>